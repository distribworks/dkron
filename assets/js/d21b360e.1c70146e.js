"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9188],{75002:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var o=r(85893),i=r(11151);const t={},s="Installation",d={id:"basics/installation",title:"Installation",description:"This guide covers different methods of installing Dkron for development, testing, and production environments.",source:"@site/docs/basics/installation.md",sourceDirName:"basics",slug:"/basics/installation",permalink:"/docs/basics/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/distribworks/dkron/tree/main/website/docs/docs/basics/installation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/docs/basics/configuration"},next:{title:"Intro",permalink:"/docs/intro"}},a={},l=[{value:"Quick Start Methods",id:"quick-start-methods",level:2},{value:"Running the binary",id:"running-the-binary",level:3},{value:"Installing from package repositories",id:"installing-from-package-repositories",level:3},{value:"Debian/Ubuntu",id:"debianubuntu",level:4},{value:"RHEL/CentOS/Fedora",id:"rhelcentosfedora",level:4},{value:"Running in Docker",id:"running-in-docker",level:2},{value:"Launching Dkron as a new container",id:"launching-dkron-as-a-new-container",level:3},{value:"Docker Image Variants",id:"docker-image-variants",level:3},{value:"Mounting a mapped file storage volume",id:"mounting-a-mapped-file-storage-volume",level:3},{value:"Running a Dkron cluster in Docker Compose",id:"running-a-dkron-cluster-in-docker-compose",level:3},{value:"Production Deployment Considerations",id:"production-deployment-considerations",level:2},{value:"System Requirements",id:"system-requirements",level:3},{value:"Cluster Size",id:"cluster-size",level:3},{value:"Security Recommendations",id:"security-recommendations",level:3},{value:"Data Directory Considerations",id:"data-directory-considerations",level:3},{value:"Configuration Example for Production",id:"configuration-example-for-production",level:3},{value:"Monitoring and Operations",id:"monitoring-and-operations",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,o.jsx)(n.p,{children:"This guide covers different methods of installing Dkron for development, testing, and production environments."}),"\n",(0,o.jsx)(n.h2,{id:"quick-start-methods",children:"Quick Start Methods"}),"\n",(0,o.jsx)(n.h3,{id:"running-the-binary",children:"Running the binary"}),"\n",(0,o.jsxs)(n.p,{children:["Download the packaged archive for your platform from the ",(0,o.jsx)(n.a,{href:"https://github.com/distribworks/dkron/releases",children:"downloads page"})," and extract the package to a shared location in your drive, like /opt/local/bin."]}),"\n",(0,o.jsxs)(n.p,{children:["Run Dkron with default setting: ",(0,o.jsx)(n.code,{children:"dkron agent --server --bootstrap-expect=1"})]}),"\n",(0,o.jsxs)(n.p,{children:["Navigate to ",(0,o.jsx)(n.a,{href:"http://localhost:8080/ui",children:"http://localhost:8080/ui"})]}),"\n",(0,o.jsx)(n.h3,{id:"installing-from-package-repositories",children:"Installing from package repositories"}),"\n",(0,o.jsx)(n.h4,{id:"debianubuntu",children:"Debian/Ubuntu"}),"\n",(0,o.jsx)(n.p,{children:"APT repository:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"deb [trusted=yes] https://repo.distrib.works/apt/ /\n"})}),"\n",(0,o.jsx)(n.p,{children:"Setup and install:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Add the repository\necho "deb [trusted=yes] https://repo.distrib.works/apt/ /" | sudo tee /etc/apt/sources.list.d/dkron.list\n\n# Update package list\nsudo apt-get update\n\n# Install Dkron\nsudo apt-get install dkron\n'})}),"\n",(0,o.jsx)(n.h4,{id:"rhelcentosfedora",children:"RHEL/CentOS/Fedora"}),"\n",(0,o.jsx)(n.p,{children:"YUM repository:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"[dkron]\nname=Dkron Repository\nbaseurl=https://repo.distrib.works/yum/\nenabled=1\ngpgcheck=0\n"})}),"\n",(0,o.jsx)(n.p,{children:"Setup and install:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Create repo file\nsudo tee /etc/yum.repos.d/dkron.repo << EOF\n[dkron]\nname=Dkron Repository\nbaseurl=https://repo.distrib.works/yum/\nenabled=1\ngpgcheck=0\nEOF\n\n# Install Dkron\nsudo yum install dkron\n"})}),"\n",(0,o.jsxs)(n.p,{children:["After package installation, Dkron will be started as a system service and an example configuration file will be placed under ",(0,o.jsx)(n.code,{children:"/etc/dkron/dkron.yml"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"running-in-docker",children:"Running in Docker"}),"\n",(0,o.jsx)(n.p,{children:"Dkron provides official Docker images via Docker Hub that can be used for deployment on any system running Docker."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If you only plan to use the built-in executors, ",(0,o.jsx)(n.code,{children:"http"})," and ",(0,o.jsx)(n.code,{children:"shell"})," you can use the Dkron Light edition that only includes a single binary as the plugins are built-in."]})}),"\n",(0,o.jsx)(n.h3,{id:"launching-dkron-as-a-new-container",children:"Launching Dkron as a new container"}),"\n",(0,o.jsx)(n.p,{children:"Here's a quick one-liner to get you off the ground (please note, we recommend further configuration for production deployments below):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -d -p 8080:8080 --name dkron dkron/dkron agent --server --bootstrap-expect=1 --node-name=node1\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This will launch a Dkron server on port 8080 by default. You can use ",(0,o.jsx)(n.code,{children:"docker logs -f dkron"})," to follow the rest of the initialization progress. Once the Dkron startup completes you can access the app at localhost:8080"]}),"\n",(0,o.jsx)(n.p,{children:"Since Docker containers have their own ports and we just map them to the system ports as needed it's easy to move Dkron onto a different system port if you wish. For example running Dkron on port 12345:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -d -p 12345:8080 --name dkron dkron/dkron agent --server --bootstrap-expect=1 --node-name=node1\n"})}),"\n",(0,o.jsx)(n.h3,{id:"docker-image-variants",children:"Docker Image Variants"}),"\n",(0,o.jsx)(n.p,{children:"Dkron offers two Docker image variants:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Standard Image"})," (",(0,o.jsx)(n.code,{children:"dkron/dkron"}),"): Includes all executors and processors"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Light Image"})," (",(0,o.jsx)(n.code,{children:"dkron/dkron:light"}),"): Contains only the main binary with built-in shell and HTTP executors"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"mounting-a-mapped-file-storage-volume",children:"Mounting a mapped file storage volume"}),"\n",(0,o.jsx)(n.p,{children:"Dkron uses the local filesystem for storing the embedded database to store its own application data and the Raft protocol log. The end result is that your Dkron data will be on disk inside your container and lost if you ever remove the container."}),"\n",(0,o.jsx)(n.p,{children:"To persist your data outside of the container and make it available for use between container launches we can mount a local path inside our container."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -d -p 8080:8080 -v ~/dkron.data:/dkron.data --name dkron dkron/dkron agent --server --bootstrap-expect=1 --data-dir=/dkron.data\n"})}),"\n",(0,o.jsx)(n.p,{children:"Now when you launch your container we are mounting that folder from our local filesystem into the container."}),"\n",(0,o.jsx)(n.h3,{id:"running-a-dkron-cluster-in-docker-compose",children:"Running a Dkron cluster in Docker Compose"}),"\n",(0,o.jsx)(n.p,{children:"For development or simple multi-node setups, Docker Compose offers an easy way to run a Dkron cluster:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"version: '3'\nservices:\n  dkron-leader:\n    image: dkron/dkron\n    ports:\n      - \"8080:8080\"\n    command: agent --server --bootstrap-expect=3 --node-name=leader --retry-join=dkron-follower-1 --retry-join=dkron-follower-2 --data-dir=/dkron.data\n    volumes:\n      - leader-data:/dkron.data\n\n  dkron-follower-1:\n    image: dkron/dkron\n    command: agent --server --node-name=follower1 --retry-join=dkron-leader --retry-join=dkron-follower-2 --data-dir=/dkron.data\n    volumes:\n      - follower1-data:/dkron.data\n    depends_on:\n      - dkron-leader\n\n  dkron-follower-2:\n    image: dkron/dkron\n    command: agent --server --node-name=follower2 --retry-join=dkron-leader --retry-join=dkron-follower-1 --data-dir=/dkron.data\n    volumes:\n      - follower2-data:/dkron.data\n    depends_on:\n      - dkron-leader\n\nvolumes:\n  leader-data:\n  follower1-data:\n  follower2-data:\n"})}),"\n",(0,o.jsx)(n.h2,{id:"production-deployment-considerations",children:"Production Deployment Considerations"}),"\n",(0,o.jsx)(n.p,{children:"When deploying Dkron in production, consider these best practices:"}),"\n",(0,o.jsx)(n.h3,{id:"system-requirements",children:"System Requirements"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"CPU"}),": Minimum 2 cores recommended, more for heavy workloads"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Memory"}),": Minimum 1GB RAM, 2GB+ recommended for production"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disk"}),": SSD recommended for better performance, especially for the data directory"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Network"}),": Low-latency network between cluster nodes"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"cluster-size",children:"Cluster Size"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Minimum Nodes"}),": 3 server nodes for high availability"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Recommended"}),": Use an odd number of server nodes (3, 5, 7) to avoid split-brain scenarios"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Region Distribution"}),": For multi-region deployments, use at least 3 servers per region"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"security-recommendations",children:"Security Recommendations"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Network Security"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Restrict access to Dkron API/UI using firewalls"}),"\n",(0,o.jsx)(n.li,{children:"Run behind a reverse proxy with TLS termination"}),"\n",(0,o.jsx)(n.li,{children:"Use VPN or private network for inter-node communication"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Authentication"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use Dkron Pro for built-in authentication features"}),"\n",(0,o.jsx)(n.li,{children:"Consider implementing a reverse proxy with authentication"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Encryption"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Enable network encryption with ",(0,o.jsx)(n.code,{children:"--encrypt"})," parameter using a key generated with ",(0,o.jsx)(n.code,{children:"dkron keygen"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"data-directory-considerations",children:"Data Directory Considerations"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Place the data directory on persistent, high-performance storage"}),"\n",(0,o.jsx)(n.li,{children:"Implement regular backups of this directory"}),"\n",(0,o.jsx)(n.li,{children:"Monitor disk space usage"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configuration-example-for-production",children:"Configuration Example for Production"}),"\n",(0,o.jsxs)(n.p,{children:["Example production configuration file (",(0,o.jsx)(n.code,{children:"/etc/dkron/dkron.yml"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'# Server settings\nserver: true\nbootstrap-expect: 3\ndata-dir: /var/lib/dkron\nlog-level: info\n\n# Network settings\nbind-addr: "{{ GetPrivateIP }}:8946"\nhttp-addr: ":8080"\nadvertise-addr: "{{ GetPublicIP }}"\nencrypt: "YOUR_ENCRYPTION_KEY_GENERATED_WITH_DKRON_KEYGEN"\n\n# Node identification\nnode-name: "dkron-prod-1"\ndatacenter: "dc1"\nregion: "us-west"\n\n# Clustering\nretry-join:\n  - "10.0.1.10"\n  - "10.0.1.11"\n  - "10.0.1.12"\nretry-interval: "30s"\nraft-multiplier: 1\n\n# Optional metrics for monitoring\nstatsd-addr: "localhost:8125"\nenable-prometheus: true\n\n# Tags for node selection\ntags:\n  role: "backend"\n  env: "production"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"monitoring-and-operations",children:"Monitoring and Operations"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Health Monitoring"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set up health checks against the API endpoint"}),"\n",(0,o.jsx)(n.li,{children:"Monitor node status and leader elections"}),"\n",(0,o.jsx)(n.li,{children:"Configure metrics collection with Prometheus or StatsD"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Log Management"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Configure log collection and aggregation"}),"\n",(0,o.jsxs)(n.li,{children:["Set appropriate log levels (",(0,o.jsx)(n.code,{children:"info"})," for production, ",(0,o.jsx)(n.code,{children:"debug"})," for troubleshooting)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Backup Strategy"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Regular backups of the data directory"}),"\n",(0,o.jsx)(n.li,{children:"Document and test restoration procedures"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.p,{children:["After installation, follow the ",(0,o.jsx)(n.a,{href:"/docs/basics/getting-started",children:"Getting Started guide"})," to learn how to create and manage jobs with Dkron."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>d,a:()=>s});var o=r(67294);const i={},t=o.createContext(i);function s(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);