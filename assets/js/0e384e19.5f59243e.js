"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9671],{26003:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=s(85893),r=s(11151);const o={sidebar_position:1},t="Intro",l={id:"intro",title:"Intro",description:"Dkron - Distributed, fault tolerant job scheduling system",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/docs/intro",draft:!1,unlisted:!1,editUrl:"https://github.com/distribworks/dkron/tree/main/website/docs/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/docs/basics/installation"},next:{title:"Job chaining",permalink:"/docs/usage/chaining"}},d={},c=[{value:"Dkron - Distributed, fault tolerant job scheduling system",id:"dkron---distributed-fault-tolerant-job-scheduling-system",level:2},{value:"What is Dkron",id:"what-is-dkron",level:2},{value:"System Architecture",id:"system-architecture",level:2},{value:"Key Components",id:"key-components",level:3},{value:"Dkron Scheduling Flow",id:"dkron-scheduling-flow",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Jobs",id:"jobs",level:3},{value:"Tags and Node Selection",id:"tags-and-node-selection",level:3},{value:"Concurrency Options",id:"concurrency-options",level:3},{value:"Status Codes and Retries",id:"status-codes-and-retries",level:3},{value:"Job Dependencies",id:"job-dependencies",level:3},{value:"Web UI",id:"web-ui",level:2},{value:"Dkron design",id:"dkron-design",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"intro",children:"Intro"})}),"\n",(0,i.jsx)(n.h2,{id:"dkron---distributed-fault-tolerant-job-scheduling-system",children:"Dkron - Distributed, fault tolerant job scheduling system"}),"\n",(0,i.jsxs)(n.p,{children:["Welcome to the Dkron documentation! This is the reference guide on how to use Dkron. If you want a getting started guide refer to the ",(0,i.jsx)(n.a,{href:"/docs/basics/getting-started",children:"getting started guide"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-dkron",children:"What is Dkron"}),"\n",(0,i.jsx)(n.p,{children:"Dkron is a distributed system to run scheduled jobs against a server or a group of servers of any size. One of the machines is the leader and the others will be followers. If the leader fails or becomes unreachable, any other one will take over and reschedule all jobs to keep the system healthy."}),"\n",(0,i.jsx)(n.p,{children:"In case the old leader becomes alive again, it'll become a follower."}),"\n",(0,i.jsx)(n.p,{children:"Dkron is a distributed cron drop-in replacement, easy to setup and fault tolerant with focus in:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Easy: Easy to use with a great UI"}),"\n",(0,i.jsx)(n.li,{children:"Reliable: Completely fault tolerant"}),"\n",(0,i.jsx)(n.li,{children:"Highly scalable: Able to handle high volumes of scheduled jobs and thousands of nodes"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Dkron is written in Go and leverages the power of distributed key value stores and ",(0,i.jsx)(n.a,{href:"https://www.serfdom.io/",children:"Serf"})," for providing fault tolerance, reliability and scalability while remaining simple and easily installable."]}),"\n",(0,i.jsxs)(n.p,{children:["Dkron is inspired by the google whitepaper ",(0,i.jsx)(n.a,{href:"https://queue.acm.org/detail.cfm?id=2745840",children:"Reliable Cron across the Planet"})]}),"\n",(0,i.jsx)(n.p,{children:"Dkron runs on Linux, OSX and Windows. It can be used to run scheduled commands on a server cluster using any combination of servers for each job. It has no single points of failure due to the use of the fault tolerant distributed databases and can work at large scale thanks to the efficient and lightweight gossip protocol."}),"\n",(0,i.jsxs)(n.p,{children:["Dkron uses the efficient and lightweight ",(0,i.jsx)(n.a,{href:"https://www.serfdom.io/docs/internals/gossip.html",children:"gossip protocol"})," underneath to communicate with nodes. Failure notification and task handling are run efficiently across an entire cluster of any size."]}),"\n",(0,i.jsx)(n.h2,{id:"system-architecture",children:"System Architecture"}),"\n",(0,i.jsx)(n.p,{children:"Dkron utilizes a server-agent architecture where multiple agents can form a cluster for high availability. Here's a high-level overview of how Dkron works:"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    Node1[Dkron Server Node 1\\n(Leader)] <--\x3e Node2[Dkron Server Node 2\\n(Follower)]\n    Node1 <--\x3e Node3[Dkron Server Node 3\\n(Follower)]\n    Node1 <--\x3e Node4[Dkron Server Node 4\\n(Follower)]\n    Node2 <--\x3e Node3\n    Node2 <--\x3e Node4\n    Node3 <--\x3e Node4"}),"\n",(0,i.jsx)(n.h3,{id:"key-components",children:"Key Components"}),"\n",(0,i.jsx)(n.p,{children:"Dkron's architecture consists of several key components:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Server Nodes"}),": Nodes running in server mode (with ",(0,i.jsx)(n.code,{children:"--server"})," flag) that participate in leader election and can schedule jobs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Leader Node"}),": One server node is elected as leader and is responsible for:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Scheduling jobs"}),"\n",(0,i.jsx)(n.li,{children:"Assigning job executions to target nodes"}),"\n",(0,i.jsx)(n.li,{children:"Maintaining the cluster state"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Follower Nodes"}),": Server nodes that are not the leader. They:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can execute jobs when selected as targets"}),"\n",(0,i.jsx)(n.li,{children:"Are ready to become the leader if the current leader fails"}),"\n",(0,i.jsx)(n.li,{children:"Maintain a replicated log of all operations"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Embedded Data Store"}),": Dkron uses an embedded BoltDB database to store:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Job definitions"}),"\n",(0,i.jsx)(n.li,{children:"Execution history"}),"\n",(0,i.jsx)(n.li,{children:"Cluster state"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Serf Layer"}),": Handles cluster membership, failure detection, and messaging between nodes using the gossip protocol."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"HTTP API and Web UI"}),": Provides a RESTful API and web interface for job management."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Executors"}),": Plugins that handle the actual execution of job commands (shell, HTTP, etc.)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Processors"}),": Plugins that process the output of job executions (log, file, email, etc.)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dkron-scheduling-flow",children:"Dkron Scheduling Flow"}),"\n",(0,i.jsx)(n.p,{children:"Here's how job scheduling works in Dkron:"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart LR\n    A[Job Definition] --\x3e B[Leader Scheduling]\n    B --\x3e C[Target Selection]\n    C --\x3e D[Execution]\n    D --\x3e E[Processing Output]\n    E --\x3e F[Results Storage]"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Job Definition"}),": Users define jobs with scheduling parameters (cron expression), execution options, and target node tags."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Leader Scheduling"}),": The leader node tracks job schedules and triggers executions at the appropriate times."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Target Selection"}),": The leader selects target nodes for job execution based on tags and execution options."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Execution"}),": Target nodes run the job using the specified executor."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Processing Output"}),": Job output is processed by configured processors."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Results Storage"}),": Execution results are stored in the distributed data store."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"jobs",children:"Jobs"}),"\n",(0,i.jsx)(n.p,{children:"Jobs are the core entity in Dkron. A job consists of:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Name"}),": Unique identifier for the job"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schedule"}),": When to run the job (cron expression)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Command"}),": What to run"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Executor"}),": How to run the command (shell, HTTP, etc.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Processors"}),": How to process the output"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tags"}),": Key-value pairs for node selection"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Concurrency"}),": Options to control concurrent execution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dependent Jobs"}),": Jobs that should run after this job completes"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tags-and-node-selection",children:"Tags and Node Selection"}),"\n",(0,i.jsx)(n.p,{children:"Dkron uses tags to control which nodes execute specific jobs:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Node Tags"}),": Assigned to nodes during startup (",(0,i.jsx)(n.code,{children:"--tag key=value"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Job Tags"}),": Specified in job definitions (",(0,i.jsx)(n.code,{children:'"tags": {"role": "web"}'}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tag Matching"}),": Jobs run on nodes where all job tags match node tags"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"concurrency-options",children:"Concurrency Options"}),"\n",(0,i.jsx)(n.p,{children:"Dkron provides several options to control job concurrency:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Concurrency"}),": Allow (or disallow) concurrent executions of the same job"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"status-codes-and-retries",children:"Status Codes and Retries"}),"\n",(0,i.jsx)(n.p,{children:"Jobs can be configured with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Retries"}),": Number of times to retry a failed execution"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"job-dependencies",children:"Job Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Dkron supports job dependencies for complex workflows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parent-Child Relationships"}),": Jobs can depend on other jobs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status Checking"}),": Child jobs run only if parent jobs succeed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Chained Execution"}),": Create multi-step job pipelines"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"web-ui",children:"Web UI"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(46022).Z+"",width:"2478",height:"1634"})}),"\n",(0,i.jsx)(n.p,{children:"The Dkron web UI provides an easy-to-use interface for:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Creating and editing jobs"}),"\n",(0,i.jsx)(n.li,{children:"Viewing execution history and logs"}),"\n",(0,i.jsx)(n.li,{children:"Monitoring cluster status"}),"\n",(0,i.jsx)(n.li,{children:"Running jobs manually"}),"\n",(0,i.jsx)(n.li,{children:"Managing job dependencies"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dkron-design",children:"Dkron design"}),"\n",(0,i.jsx)(n.p,{children:"Dkron is designed to solve one problem well, executing commands in given intervals. Following the unix philosophy of doing one thing and doing it well (like the battle-tested cron) but with the given addition of being designed for the cloud era, removing single points of failure in environments where scheduled jobs are needed to be run in multiple servers."})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},46022:(e,n,s)=>{s.d(n,{Z:()=>i});const i=s.p+"assets/images/job-list-new-5785900614f36d3b1500704226ca707c.png"},11151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>t});var i=s(67294);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);