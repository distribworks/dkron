"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8070],{48193:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(30758);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},53680:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"faq","title":"Frequently Asked Questions (FAQ)","description":"This FAQ addresses the most common issues and questions reported by Dkron users based on GitHub issues and community discussions.","source":"@site/docs/faq.md","sourceDirName":".","slug":"/faq","permalink":"/docs/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/distribworks/dkron/tree/main/website/docs/docs/faq.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"dkron version","permalink":"/docs/cli/dkron_version"},"next":{"title":"Access Control Lists","permalink":"/docs/pro/acls"}}');var i=s(86070),o=s(48193);const t={},l="Frequently Asked Questions (FAQ)",d={},c=[{value:"Performance and Scalability",id:"performance-and-scalability",level:2},{value:"Why is my Dkron cluster experiencing performance degradation with high-frequency jobs?",id:"why-is-my-dkron-cluster-experiencing-performance-degradation-with-high-frequency-jobs",level:3},{value:"Does Dkron provide performance benchmark data?",id:"does-dkron-provide-performance-benchmark-data",level:3},{value:"Memory Issues",id:"memory-issues",level:2},{value:"Why is Dkron consuming excessive memory or experiencing OOM kills?",id:"why-is-dkron-consuming-excessive-memory-or-experiencing-oom-kills",level:3},{value:"Clustering and High Availability",id:"clustering-and-high-availability",level:2},{value:"Why is my agent unable to connect to the cluster?",id:"why-is-my-agent-unable-to-connect-to-the-cluster",level:3},{value:"Why does retry-join fail after a server restart?",id:"why-does-retry-join-fail-after-a-server-restart",level:3},{value:"How do I recover from &quot;no leader&quot; state after restart?",id:"how-do-i-recover-from-no-leader-state-after-restart",level:3},{value:"Why do servers have inconsistent job data?",id:"why-do-servers-have-inconsistent-job-data",level:3},{value:"Kubernetes and Container Deployments",id:"kubernetes-and-container-deployments",level:2},{value:"Why does one Dkron pod fail with &quot;panic: log not found&quot; in Kubernetes?",id:"why-does-one-dkron-pod-fail-with-panic-log-not-found-in-kubernetes",level:3},{value:"How do I configure log rotation in Docker?",id:"how-do-i-configure-log-rotation-in-docker",level:3},{value:"Job Execution",id:"job-execution",level:2},{value:"Why does my shell job fail to execute?",id:"why-does-my-shell-job-fail-to-execute",level:3},{value:"Why does &quot;forbid&quot; concurrency policy not prevent concurrent executions?",id:"why-does-forbid-concurrency-policy-not-prevent-concurrent-executions",level:3},{value:"Why does <code>cmd.Process.Kill()</code> not clean up child processes?",id:"why-does-cmdprocesskill-not-clean-up-child-processes",level:3},{value:"Job Configuration",id:"job-configuration",level:2},{value:"Why does <code>runoncreate</code> block the API call?",id:"why-does-runoncreate-block-the-api-call",level:3},{value:"Web UI",id:"web-ui",level:2},{value:"Why does the UI show &quot;Empty output&quot; for running jobs?",id:"why-does-the-ui-show-empty-output-for-running-jobs",level:3},{value:"Why does a running job show &quot;failed&quot; status with strange finished_at date?",id:"why-does-a-running-job-show-failed-status-with-strange-finished_at-date",level:3},{value:"Why is the job ID missing on small screens?",id:"why-is-the-job-id-missing-on-small-screens",level:3},{value:"Plugins and Executors",id:"plugins-and-executors",level:2},{value:"Why doesn&#39;t the GRPC executor close connections?",id:"why-doesnt-the-grpc-executor-close-connections",level:3},{value:"API",id:"api",level:2},{value:"Why does the restore API not work?",id:"why-does-the-restore-api-not-work",level:3},{value:"Configuration and Setup",id:"configuration-and-setup",level:2},{value:"How do I set up Dkron in a dual data center configuration?",id:"how-do-i-set-up-dkron-in-a-dual-data-center-configuration",level:3},{value:"What are the resource requirements for Dkron?",id:"what-are-the-resource-requirements-for-dkron",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"How do I debug &quot;invalid memory address or nil pointer dereference&quot; errors?",id:"how-do-i-debug-invalid-memory-address-or-nil-pointer-dereference-errors",level:3},{value:"Where can I find more help?",id:"where-can-i-find-more-help",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"General recommendations for production deployments:",id:"general-recommendations-for-production-deployments",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"frequently-asked-questions-faq",children:"Frequently Asked Questions (FAQ)"})}),"\n",(0,i.jsx)(n.p,{children:"This FAQ addresses the most common issues and questions reported by Dkron users based on GitHub issues and community discussions."}),"\n",(0,i.jsx)(n.h2,{id:"performance-and-scalability",children:"Performance and Scalability"}),"\n",(0,i.jsx)(n.h3,{id:"why-is-my-dkron-cluster-experiencing-performance-degradation-with-high-frequency-jobs",children:"Why is my Dkron cluster experiencing performance degradation with high-frequency jobs?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": Leader node crashes or becomes unresponsive when running many jobs with frequent schedules (e.g., every second or minute)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Avoid scheduling jobs too frequently (overlapping on the second). Consider batching operations or using a queue system for very high-frequency tasks."}),"\n",(0,i.jsx)(n.li,{children:"Offload logs to stdout/file using processors."}),"\n",(0,i.jsx)(n.li,{children:"Monitor memory usage and ensure adequate resources are allocated to the leader node."}),"\n",(0,i.jsx)(n.li,{children:"Distribute jobs across multiple agent nodes using tags to reduce load on the leader."}),"\n",(0,i.jsx)(n.li,{children:"Review the number of concurrent jobs and adjust concurrency policies accordingly."}),"\n",(0,i.jsx)(n.li,{children:"Consider upgrading to a more powerful server for the leader node in large-scale deployments."}),"\n",(0,i.jsx)(n.li,{children:"Consider upgrading to Dkron Pro using Raft fastlog"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1828",children:"Issue #1828"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1842",children:"Issue #1842"})]}),"\n",(0,i.jsx)(n.h3,{id:"does-dkron-provide-performance-benchmark-data",children:"Does Dkron provide performance benchmark data?"}),"\n",(0,i.jsx)(n.p,{children:"Dkron does not currently provide official benchmark data. Performance varies significantly based on:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Job frequency and complexity"}),"\n",(0,i.jsx)(n.li,{children:"Cluster size and configuration"}),"\n",(0,i.jsx)(n.li,{children:"Hardware resources"}),"\n",(0,i.jsx)(n.li,{children:"Network latency"}),"\n",(0,i.jsx)(n.li,{children:"Type of executor used"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For high-frequency scheduling scenarios, it's recommended to conduct your own benchmarking in an environment similar to your production setup."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1839",children:"Issue #1839"})]}),"\n",(0,i.jsx)(n.h2,{id:"memory-issues",children:"Memory Issues"}),"\n",(0,i.jsx)(n.h3,{id:"why-is-dkron-consuming-excessive-memory-or-experiencing-oom-kills",children:"Why is Dkron consuming excessive memory or experiencing OOM kills?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory leaks"}),": Older versions had memory leak issues that have been addressed in recent releases."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"High execution count"}),": Storing too many execution records (Dkron keeps up to 100 executions per job)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Large job output"}),": Jobs that produce large amounts of output can consume significant memory."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Too many jobs"}),": Running thousands of jobs simultaneously increases memory usage."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update to the latest version of Dkron (4.x series has several memory improvements)."}),"\n",(0,i.jsxs)(n.li,{children:["Use the ",(0,i.jsx)(n.code,{children:"files"})," processor to write job output to disk instead of storing it in memory."]}),"\n",(0,i.jsx)(n.li,{children:"Limit job output size in executor configurations."}),"\n",(0,i.jsx)(n.li,{children:"Monitor memory usage with Prometheus metrics."}),"\n",(0,i.jsx)(n.li,{children:"Set appropriate memory limits in Docker/Kubernetes deployments."}),"\n",(0,i.jsx)(n.li,{children:"Reduce the number of concurrent jobs or distribute them across more agents."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1753",children:"Issue #1753"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1566",children:"Issue #1566"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1553",children:"Issue #1553"})]}),"\n",(0,i.jsx)(n.h2,{id:"clustering-and-high-availability",children:"Clustering and High Availability"}),"\n",(0,i.jsx)(n.h3,{id:"why-is-my-agent-unable-to-connect-to-the-cluster",children:"Why is my agent unable to connect to the cluster?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network connectivity issues"}),"\n",(0,i.jsx)(n.li,{children:"Firewall blocking required ports (default: 8946 for Serf, 8190 for Raft)"}),"\n",(0,i.jsxs)(n.li,{children:["Incorrect ",(0,i.jsx)(n.code,{children:"retry-join"})," configuration"]}),"\n",(0,i.jsx)(n.li,{children:"DNS resolution problems"}),"\n",(0,i.jsx)(n.li,{children:"Encryption key mismatch"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Verify network connectivity between nodes using ",(0,i.jsx)(n.code,{children:"telnet"})," or ",(0,i.jsx)(n.code,{children:"nc"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Check firewall rules allow traffic on ports 8946 (Serf) and 8190 (Raft)."}),"\n",(0,i.jsxs)(n.li,{children:["Use IP addresses instead of hostnames in ",(0,i.jsx)(n.code,{children:"retry-join"})," if DNS is unreliable."]}),"\n",(0,i.jsx)(n.li,{children:"Ensure all nodes use the same encryption key if encryption is enabled."}),"\n",(0,i.jsxs)(n.li,{children:["Check logs for specific error messages: ",(0,i.jsx)(n.code,{children:"level=error ts=<timestamp> caller=agent.go:xxx"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1727",children:"Issue #1727"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1702",children:"Issue #1702"})]}),"\n",(0,i.jsx)(n.h3,{id:"why-does-retry-join-fail-after-a-server-restart",children:"Why does retry-join fail after a server restart?"}),"\n",(0,i.jsxs)(n.p,{children:["If using DNS names in ",(0,i.jsx)(n.code,{children:"retry-join"}),", Dkron may cache the old IP addresses. Solutions:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use static IP addresses in ",(0,i.jsx)(n.code,{children:"retry-join"})," configuration."]}),"\n",(0,i.jsx)(n.li,{children:"Ensure DNS updates propagate before restarting nodes."}),"\n",(0,i.jsx)(n.li,{children:"Set appropriate DNS TTL values for dynamic environments."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1253",children:"Issue #1253"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1213",children:"Issue #1213"})]}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-recover-from-no-leader-state-after-restart",children:'How do I recover from "no leader" state after restart?'}),"\n",(0,i.jsx)(n.p,{children:"In single-node mode:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check Raft peers\ndkron raft list-peers\n\n# If cluster state is corrupted, backup and remove the data directory\ncp -r /var/lib/dkron /var/lib/dkron.backup\nrm -rf /var/lib/dkron/*\n# Restart dkron\n"})}),"\n",(0,i.jsx)(n.p,{children:"In multi-node mode:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure at least ",(0,i.jsx)(n.code,{children:"bootstrap-expect"})," number of servers are running."]}),"\n",(0,i.jsx)(n.li,{children:"Check that all servers can communicate on the Raft port (8190)."}),"\n",(0,i.jsx)(n.li,{children:"Verify there's no network partition."}),"\n",(0,i.jsx)(n.li,{children:"Review logs for Raft election errors."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1529",children:"Issue #1529"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1212",children:"Issue #1212"})]}),"\n",(0,i.jsx)(n.h3,{id:"why-do-servers-have-inconsistent-job-data",children:"Why do servers have inconsistent job data?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Causes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network partitions causing split-brain scenarios"}),"\n",(0,i.jsx)(n.li,{children:"Raft replication issues"}),"\n",(0,i.jsx)(n.li,{children:"Corrupted data on one or more nodes"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure stable network connectivity between all server nodes."}),"\n",(0,i.jsxs)(n.li,{children:["Verify Raft replication is working: ",(0,i.jsx)(n.code,{children:"dkron raft list-peers"})]}),"\n",(0,i.jsxs)(n.li,{children:["Check logs for Raft errors: ",(0,i.jsx)(n.code,{children:"grep -i raft /var/log/dkron.log"})]}),"\n",(0,i.jsx)(n.li,{children:"In extreme cases, restore from backup or rebuild the cluster."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1371",children:"Issue #1371"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1337",children:"Issue #1337"})]}),"\n",(0,i.jsx)(n.h2,{id:"kubernetes-and-container-deployments",children:"Kubernetes and Container Deployments"}),"\n",(0,i.jsx)(n.h3,{id:"why-does-one-dkron-pod-fail-with-panic-log-not-found-in-kubernetes",children:'Why does one Dkron pod fail with "panic: log not found" in Kubernetes?'}),"\n",(0,i.jsx)(n.p,{children:"This typically occurs during Raft initialization in StatefulSets when persistent volumes are not properly configured."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure persistent volumes are correctly configured and bound."}),"\n",(0,i.jsxs)(n.li,{children:["Verify ",(0,i.jsx)(n.code,{children:"bootstrap-expect"})," matches the number of server replicas."]}),"\n",(0,i.jsx)(n.li,{children:"Check that all pods can resolve each other's DNS names."}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"StatefulSet"})," with headless service for stable network identities."]}),"\n",(0,i.jsxs)(n.li,{children:["Ensure proper initialization order with ",(0,i.jsx)(n.code,{children:"podManagementPolicy: Parallel"})," or readiness probes."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1557",children:"Issue #1557"})]}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-configure-log-rotation-in-docker",children:"How do I configure log rotation in Docker?"}),"\n",(0,i.jsx)(n.p,{children:"Dkron writes logs to stdout/stderr by default in Docker. To manage logs:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Docker Compose"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'services:\n    dkron:\n        logging:\n            driver: "json-file"\n            options:\n                max-size: "10m"\n                max-file: "3"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Docker CLI"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --log-driver json-file \\\n  --log-opt max-size=10m \\\n  --log-opt max-file=3 \\\n  distribworks/dkron:latest\n"})}),"\n",(0,i.jsx)(n.p,{children:"To mount logs to the host:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"volumes:\n    - ./logs:/var/log/dkron\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Then configure Dkron to write to files via ",(0,i.jsx)(n.code,{children:"log-level"})," and redirect output."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1556",children:"Issue #1556"})]}),"\n",(0,i.jsx)(n.h2,{id:"job-execution",children:"Job Execution"}),"\n",(0,i.jsx)(n.h3,{id:"why-does-my-shell-job-fail-to-execute",children:"Why does my shell job fail to execute?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Shell not available in the container/environment"}),"\n",(0,i.jsx)(n.li,{children:"Incorrect command syntax"}),"\n",(0,i.jsx)(n.li,{children:"Missing environment variables"}),"\n",(0,i.jsx)(n.li,{children:"Permission issues"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Verify shell is available: ",(0,i.jsx)(n.code,{children:"which sh"})," or ",(0,i.jsx)(n.code,{children:"which bash"})]}),"\n",(0,i.jsxs)(n.li,{children:["Use absolute paths for commands: ",(0,i.jsx)(n.code,{children:'/bin/bash -c "command"'})]}),"\n",(0,i.jsxs)(n.li,{children:["Set the ",(0,i.jsx)(n.code,{children:"shell"})," option explicitly in executor config:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "executor": "shell",\n    "executor_config": {\n        "command": "your-command",\n        "shell": "true"\n    }\n}\n'})}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Check file permissions and ownership"}),"\n",(0,i.jsx)(n.li,{children:"Review execution logs for specific error messages"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1775",children:"Issue #1775"})]}),"\n",(0,i.jsx)(n.h3,{id:"why-does-forbid-concurrency-policy-not-prevent-concurrent-executions",children:'Why does "forbid" concurrency policy not prevent concurrent executions?'}),"\n",(0,i.jsx)(n.p,{children:"In distributed environments, there can be a race condition where multiple executions start before the concurrency check completes. This is a known limitation of distributed scheduling."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Workarounds"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implement application-level locking (e.g., using Redis, etcd, or database locks)."}),"\n",(0,i.jsx)(n.li,{children:"Increase job duration to reduce the likelihood of overlapping schedules."}),"\n",(0,i.jsx)(n.li,{children:"Use idempotent job designs that can handle concurrent executions safely."}),"\n",(0,i.jsx)(n.li,{children:"Add a small delay at job start to check for other running instances."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1569",children:"Issue #1569"})]}),"\n",(0,i.jsxs)(n.h3,{id:"why-does-cmdprocesskill-not-clean-up-child-processes",children:["Why does ",(0,i.jsx)(n.code,{children:"cmd.Process.Kill()"})," not clean up child processes?"]}),"\n",(0,i.jsx)(n.p,{children:"On Unix systems, killing the parent process doesn't automatically kill child processes. This can leave orphaned processes running."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":\nUse process groups to ensure all child processes are terminated:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# In your script, create a process group\nset -m  # Enable job control\ntrap 'kill -- -$$' EXIT INT TERM\n\n# Your commands here\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Or use the ",(0,i.jsx)(n.code,{children:"timeout"})," command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"timeout 300 your-long-running-command\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1385",children:"Issue #1385"})]}),"\n",(0,i.jsx)(n.h2,{id:"job-configuration",children:"Job Configuration"}),"\n",(0,i.jsxs)(n.h3,{id:"why-does-runoncreate-block-the-api-call",children:["Why does ",(0,i.jsx)(n.code,{children:"runoncreate"})," block the API call?"]}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"runoncreate"})," is set to ",(0,i.jsx)(n.code,{children:"true"}),", the job creation API waits for the first execution to complete before returning. This is intentional behavior for validation purposes."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Workaround"}),":\nIf you need immediate API response:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create the job with ",(0,i.jsx)(n.code,{children:"runoncreate: false"})]}),"\n",(0,i.jsxs)(n.li,{children:["Make a separate API call to trigger execution: ",(0,i.jsx)(n.code,{children:"POST /v1/jobs/{job_name}/run"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1268",children:"Issue #1268"})]}),"\n",(0,i.jsx)(n.h2,{id:"web-ui",children:"Web UI"}),"\n",(0,i.jsx)(n.h3,{id:"why-does-the-ui-show-empty-output-for-running-jobs",children:'Why does the UI show "Empty output" for running jobs?'}),"\n",(0,i.jsx)(n.p,{children:"The UI displays execution output after the job completes. For long-running jobs, output is not streamed in real-time."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Wait for job completion to see output"}),"\n",(0,i.jsxs)(n.li,{children:["Use the ",(0,i.jsx)(n.code,{children:"log"})," or ",(0,i.jsx)(n.code,{children:"files"})," processor to write output to a log aggregation system"]}),"\n",(0,i.jsxs)(n.li,{children:["Use the API to fetch execution details: ",(0,i.jsx)(n.code,{children:"GET /v1/executions/{execution_id}"})]}),"\n",(0,i.jsx)(n.li,{children:"Check agent logs directly on the executing node"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1742",children:"Issue #1742"})]}),"\n",(0,i.jsx)(n.h3,{id:"why-does-a-running-job-show-failed-status-with-strange-finished_at-date",children:'Why does a running job show "failed" status with strange finished_at date?'}),"\n",(0,i.jsx)(n.p,{children:"This is a UI display bug that has been addressed in recent versions. The job is still running, but the UI incorrectly shows it as failed."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update to the latest version (4.x)"}),"\n",(0,i.jsxs)(n.li,{children:["Check actual job status via API: ",(0,i.jsx)(n.code,{children:"GET /v1/jobs/{job_name}"})]}),"\n",(0,i.jsxs)(n.li,{children:["Monitor execution status: ",(0,i.jsx)(n.code,{children:"GET /v1/executions/{execution_id}"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1817",children:"Issue #1817"})]}),"\n",(0,i.jsx)(n.h3,{id:"why-is-the-job-id-missing-on-small-screens",children:"Why is the job ID missing on small screens?"}),"\n",(0,i.jsx)(n.p,{children:"This was a responsive design issue in the Web UI that has been fixed in version 4.x."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":\nUpdate to the latest version of Dkron."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1583",children:"Issue #1583"})]}),"\n",(0,i.jsx)(n.h2,{id:"plugins-and-executors",children:"Plugins and Executors"}),"\n",(0,i.jsx)(n.h3,{id:"why-doesnt-the-grpc-executor-close-connections",children:"Why doesn't the GRPC executor close connections?"}),"\n",(0,i.jsx)(n.p,{children:"Older versions had connection leak issues. Solutions:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update to the latest version"}),"\n",(0,i.jsx)(n.li,{children:"Implement connection pooling in your gRPC service"}),"\n",(0,i.jsx)(n.li,{children:"Set appropriate timeout values in executor config"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1236",children:"Issue #1236"})]}),"\n",(0,i.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,i.jsx)(n.h3,{id:"why-does-the-restore-api-not-work",children:"Why does the restore API not work?"}),"\n",(0,i.jsx)(n.p,{children:"The restore endpoint requires proper backup format and permissions."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Create backup\ncurl http://localhost:8080/v1/backup > backup.json\n\n# Restore backup\ncurl -X POST http://localhost:8080/v1/restore \\\n  -H "Content-Type: application/json" \\\n  -d @backup.json\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Restore should be performed on a clean cluster or during maintenance windows."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1376",children:"Issue #1376"})]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-and-setup",children:"Configuration and Setup"}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-set-up-dkron-in-a-dual-data-center-configuration",children:"How do I set up Dkron in a dual data center configuration?"}),"\n",(0,i.jsx)(n.p,{children:"Dkron uses Raft which requires a majority of nodes to be available. For multi-datacenter setups:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Option 1: Single Raft cluster across DCs"})," (not recommended)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"High latency can cause leader election issues"}),"\n",(0,i.jsx)(n.li,{children:"Network partitions can cause outages"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Option 2: Separate clusters per DC"})," (recommended)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Run independent Dkron clusters in each DC"}),"\n",(0,i.jsx)(n.li,{children:"Use external synchronization for job definitions"}),"\n",(0,i.jsx)(n.li,{children:"Configure failover at the application level"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 3: Use Pro version features"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enhanced replication capabilities"}),"\n",(0,i.jsx)(n.li,{children:"Better multi-datacenter support"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1363",children:"Issue #1363"})]}),"\n",(0,i.jsx)(n.h3,{id:"what-are-the-resource-requirements-for-dkron",children:"What are the resource requirements for Dkron?"}),"\n",(0,i.jsx)(n.p,{children:"Requirements vary based on:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Number of jobs"}),"\n",(0,i.jsx)(n.li,{children:"Job execution frequency"}),"\n",(0,i.jsx)(n.li,{children:"Cluster size"}),"\n",(0,i.jsx)(n.li,{children:"Execution history retention"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Minimum recommendations"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server nodes"}),": 1-2 CPU cores, 512MB-1GB RAM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent nodes"}),": 1 CPU core, 256MB-512MB RAM"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Production recommendations"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server nodes"}),": 2-4 CPU cores, 2-4GB RAM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent nodes"}),": 2 CPU cores, 1-2GB RAM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Storage"}),": 10GB+ for execution history"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Scale vertically for the leader node and horizontally for agents."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1560",children:"Issue #1560"})]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-debug-invalid-memory-address-or-nil-pointer-dereference-errors",children:'How do I debug "invalid memory address or nil pointer dereference" errors?'}),"\n",(0,i.jsx)(n.p,{children:"This panic typically indicates a bug in Dkron or a plugin. Steps to debug:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update to the latest version"})," - Many nil pointer issues have been fixed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check logs"})," for the full stack trace"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Identify the context"})," - What operation was being performed?"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reproduce"})," - Can you consistently trigger the issue?"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Report"})," - If it persists, file a GitHub issue with:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Dkron version"}),"\n",(0,i.jsx)(n.li,{children:"Configuration"}),"\n",(0,i.jsx)(n.li,{children:"Steps to reproduce"}),"\n",(0,i.jsx)(n.li,{children:"Full logs and stack trace"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1388",children:"Issue #1388"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues/1265",children:"Issue #1265"})]}),"\n",(0,i.jsx)(n.h3,{id:"where-can-i-find-more-help",children:"Where can I find more help?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documentation"}),": ",(0,i.jsx)(n.a,{href:"https://dkron.io/docs",children:"https://dkron.io/docs"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GitHub Issues"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/issues",children:"https://github.com/distribworks/dkron/issues"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Discussions"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/distribworks/dkron/discussions",children:"https://github.com/distribworks/dkron/discussions"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Commercial Support"}),": Available for Dkron Pro - see ",(0,i.jsx)(n.a,{href:"https://dkron.io/pro",children:"https://dkron.io/pro"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"general-recommendations-for-production-deployments",children:"General recommendations for production deployments:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"High Availability"}),": Run at least 3 server nodes (odd number for Raft quorum)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitoring"}),": Enable Prometheus metrics and set up alerts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backups"}),": Regularly backup job configurations using the backup API"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Updates"}),": Keep Dkron updated to get bug fixes and performance improvements"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resource Limits"}),": Set appropriate memory/CPU limits in container environments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Job Design"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use idempotent operations"}),"\n",(0,i.jsx)(n.li,{children:"Implement proper error handling"}),"\n",(0,i.jsx)(n.li,{children:"Keep job execution time reasonable (< 1 hour)"}),"\n",(0,i.jsx)(n.li,{children:"Avoid very high-frequency schedules (< 1 minute)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable TLS for API communication"}),"\n",(0,i.jsx)(n.li,{children:"Use firewall rules to restrict access"}),"\n",(0,i.jsx)(n.li,{children:"Consider using ACLs (Pro version)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logging"}),": Use processors (log, files, syslog) to persist job output"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Testing"}),": Test job configurations in a staging environment first"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documentation"}),": Document your job configurations and dependencies"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);