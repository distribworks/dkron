"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[3520],{48193:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var s=r(30758);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},87602:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"usage/metrics","title":"Metrics","description":"Dkron has the ability to send metrics to Statsd for dashboards and historical reporting or provide prometheus format metrics via the api. It sends job processing metrics, golang, and serf metrics.","source":"@site/versioned_docs/version-v3/usage/metrics.md","sourceDirName":"usage","slug":"/usage/metrics","permalink":"/docs/v3/usage/metrics","draft":false,"unlisted":false,"editUrl":"https://github.com/distribworks/dkron/tree/main/website/docs/versioned_docs/version-v3/usage/metrics.md","tags":[],"version":"v3","frontMatter":{"title":"Metrics"},"sidebar":"tutorialSidebar","previous":{"title":"Job metadata","permalink":"/docs/v3/usage/metatags"},"next":{"title":"Plugins","permalink":"/docs/v3/usage/plugins/"}}');var i=r(86070),t=r(48193);const o={title:"Metrics"},l=void 0,d={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Statsd",id:"statsd",level:3},{value:"Prometheus",id:"prometheus",level:3},{value:"Metrics",id:"metrics",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Dkron has the ability to send metrics to Statsd for dashboards and historical reporting or provide prometheus format metrics via the api. It sends job processing metrics, golang, and serf metrics."}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"statsd",children:"Statsd"}),"\n",(0,i.jsx)(n.p,{children:"Add this in your yaml config file to enable statsd metrics."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'statsd-addr: "localhost:8125"\n# Or for datadog statsd\ndog-statsd-addr: "localhost:8125"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"prometheus",children:"Prometheus"}),"\n",(0,i.jsxs)(n.p,{children:["Add this to your yaml config file to enable serving prometheus metrics at the endpoint ",(0,i.jsx)(n.code,{children:"/metrics"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"enable-prometheus: true\n"})}),"\n",(0,i.jsx)(n.p,{children:"Additionally, in your Prometheus config file (prometheus.yml), add the following to link dkron metric endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'scrape_configs:\n  ... #initial configuration\n  \n  - job_name: "dkron_metrics"\n    # metrics_path defaults to \'/metrics\'\n    static_configs:\n      - targets: ["localhost:6080"]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"metrics",children:"Metrics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"dkron.agent.event_received.query_execution_done"}),"\n",(0,i.jsx)(n.li,{children:"dkron.agent.event_received.query_run_job"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.gossip"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.probeNode"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.pushPullNode"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.tcp.accept"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.tcp.connect"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.tcp.sent"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.udp.received"}),"\n",(0,i.jsx)(n.li,{children:"dkron.memberlist.udp.sent"}),"\n",(0,i.jsx)(n.li,{children:"dkron.grpc.call_execution_done"}),"\n",(0,i.jsx)(n.li,{children:"dkron.grpc.call_get_job"}),"\n",(0,i.jsx)(n.li,{children:"dkron.grpc.execution_done"}),"\n",(0,i.jsx)(n.li,{children:"dkron.grpc.get_job"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.alloc_bytes"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.free_count"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.gc_pause_ns"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.heap_objects"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.malloc_count"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.num_goroutines"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.sys_bytes"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.total_gc_pause_ns"}),"\n",(0,i.jsx)(n.li,{children:"dkron.runtime.total_gc_runs"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.coordinate.adjustment_ms"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.msgs.received"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.msgs.sent"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queries"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queries.execution_done"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queries.run_job"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.query_acks"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.query_responses"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queue.Event"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queue.Intent"}),"\n",(0,i.jsx)(n.li,{children:"dkron.serf.queue.Query"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);